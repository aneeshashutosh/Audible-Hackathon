<html>
<head>
  <link rel="stylesheet" href="../css/preprocessor.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.0/jquery.min.js"></script>
</head>
<body>
  <div id="message">Click mic to toggle listening</div>
  <div id="meter" class="icon-microphone"><span></span></div>
  <script>
  var audioCtx = new AudioContext;
  var url = '../mp3/book.m4a';
  var audio = new Audio(url);
  var processor = audioCtx.createScriptProcessor(2048, 1, 1);
  var meter = document.getElementById('meter');
  var source;

  var cheeseString = [ "27.538 : 27.548 : CHAPTER"
  , "27.771 : 27.781 : 1"
  , "31.532 : 31.542 : LOG"
  , "31.764 : 31.774 : ENTRY:"
  , "32.554 : 32.564 : SOL"
  , "33.065 : 33.075 : 6"
  , "35.619 : 35.629 : I’m"
  , "36.455 : 36.465 : pretty"
  , "36.687 : 36.697 : much"
  , "36.919 : 36.929 : fucked."
  , "37.802 : 37.812 : That’s"
  , "38.127 : 38.137 : my"
  , "38.312 : 38.322 : considered"
  , "38.963 : 38.973 : opinion."
  , "39.984 : 39.994 : Fucked."
  , "41.844 : 42.343 : Six"
  , "42.344 : 42.813 : days"
  , "42.954 : 43.001 : into"
  , "43.002 : 43.049 : what"
  , "43.050 : 43.121 : should"
  , "43.124 : 43.333 : be"
  , "43.334 : 43.463 : the"
  , "43.614 : 44.103 : greatest"
  , "44.104 : 44.243 : two"
  , "44.244 : 44.603 : months"
  , "44.604 : 44.683 : of"
  , "44.684 : 44.873 : my"
  , "44.874 : 45.303 : life,"
  , "45.594 : 45.763 : and"
  , "45.764 : 45.973 : it’s"
  , "45.974 : 46.263 : turned"
  , "46.264 : 46.583 : into"
  , "46.584 : 46.633 : a"
  , "46.634 : 47.233 : nightmare."
  , "47.564 : 48.133 : I"
  , "48.134 : 48.263 : don’t"
  , "48.264 : 48.435 : even"
  , "48.436 : 48.607 : know"
  , "48.608 : 48.822 : who’ll"
  , "48.834 : 49.073 : read"
  , "49.074 : 49.321 : this."
  , "49.508 : 49.569 : I"
  , "49.570 : 49.879 : guess"
  , "49.884 : 50.343 : someone"
  , "50.344 : 50.453 : will"
  , "50.454 : 50.803 : find"
  , "50.804 : 50.883 : it"
  , "50.884 : 51.483 : eventually."
  , "51.784 : 52.013 : Maybe"
  , "52.014 : 52.093 : a"
  , "52.124 : 52.453 : hundred"
  , "52.454 : 52.823 : years"
  , "52.824 : 53.403 : from"
  , "53.404 : 53.838 : now."
  , "54.274 : 54.393 : For"
  , "54.394 : 54.493 : the"
  , "54.494 : 54.853 : record…"
  , "55.124 : 55.243 : I"
  , "55.244 : 55.563 : didn’t"
  , "55.564 : 55.953 : die"
  , "55.954 : 56.173 : on"
  , "56.174 : 56.473 : Sol"
  , "56.474 : 57.083 : 6."
  , "57.334 : 57.683 : Certainly"
  , "57.684 : 57.803 : the"
  , "57.804 : 58.083 : rest"
  , "58.084 : 58.153 : of"
  , "58.154 : 58.243 : the"
  , "58.244 : 58.423 : crew"
  , "58.424 : 58.723 : thought"
  , "58.724 : 58.833 : I"
  , "58.834 : 59.373 : did,"
  , "59.374 : 59.473 : and"
  , "59.474 : 59.573 : I"
  , "59.574 : 59.897 : can’t"
  , "59.898 : 60.302 : blame"
  , "60.303 : 60.626 : them."
  , "60.870 : 61.274 : Maybe"
  , "61.284 : 61.513 : there’ll"
  , "61.514 : 61.703 : be"
  , "61.704 : 61.753 : a"
  , "61.754 : 62.003 : day"
  , "62.004 : 62.113 : of"
  , "62.114 : 62.623 : national"
  , "62.624 : 62.983 : mourning"
  , "62.984 : 63.265 : for"
  , "63.266 : 63.453 : me,"
  , "63.454 : 63.735 : and"
  , "63.736 : 63.923 : my"
  , "63.924 : 64.563 : Wikipedia"
  , "64.563 : 64.923 : page"
  , "64.924 : 65.043 : will"
  , "65.044 : 65.333 : say,"
  , "65.404 : 65.713 : Mark"
  , "65.714 : 66.183 : Watney"
  , "66.314 : 66.483 : is"
  , "66.484 : 66.673 : the"
  , "66.704 : 67.093 : only"
  , "67.094 : 67.483 : human"
  , "67.484 : 67.843 : being"
  , "67.844 : 68.013 : to"
  , "68.014 : 68.113 : have"
  , "68.114 : 68.503 : died"
  , "68.504 : 68.733 : on"
  , "68.734 : 69.293 : Mars.”"
  , "70.114 : 70.323 : And"
  , "70.324 : 70.723 : it’ll"
  , "70.724 : 70.893 : be"
  , "70.894 : 71.243 : right,"
  , "71.334 : 71.709 : probably."
  , "71.851 : 72.085 : Cause"
  , "72.094 : 72.223 : I’ll"
  , "72.224 : 72.563 : surely"
  , "72.564 : 72.806 : die"
  , "72.807 : 73.130 : here."
  , "73.374 : 73.697 : Just"
  , "73.698 : 73.940 : not"
  , "73.941 : 74.102 : on"
  , "74.104 : 74.483 : Sol"
  , "74.484 : 74.973 : 6"
  , "74.974 : 75.153 : when"
  , "75.154 : 75.613 : everyone"
  , "75.614 : 75.973 : thinks"
  , "75.974 : 76.133 : I"
  , "76.134 : 76.613 : did."
  , "77.094 : 77.733 : Let’s"
  , "77.744 : 78.093 : see…"
  , "78.374 : 78.613 : where"
  , "78.614 : 78.693 : do"
  , "78.694 : 78.773 : I"
  , "78.774 : 79.073 : begin?"
  , "80.124 : 80.273 : The"
  , "80.274 : 80.573 : Ares"
  , "80.574 : 81.053 : Program."
  , "81.754 : 82.503 : Mankind"
  , "82.504 : 82.913 : reaching"
  , "82.914 : 83.083 : out"
  , "83.084 : 83.203 : to"
  , "83.204 : 83.643 : Mars"
  , "83.644 : 83.773 : to"
  , "83.774 : 84.073 : send"
  , "84.074 : 84.403 : people"
  , "84.404 : 84.543 : to"
  , "84.544 : 84.863 : another"
  , "84.864 : 85.243 : planet"
  , "85.244 : 85.373 : for"
  , "85.374 : 85.463 : the"
  , "85.464 : 85.763 : very"
  , "85.764 : 86.093 : first"
  , "86.094 : 86.483 : time"
  , "86.484 : 86.613 : and"
  , "86.614 : 87.293 : expand"
  , "87.294 : 87.423 : the"
  , "87.424 : 88.143 : horizons"
  , "88.144 : 88.283 : of"
  , "88.284 : 88.973 : humanity"
  , "88.974 : 89.253 : blah,"
  , "89.254 : 89.493 : blah,"
  , "89.494 : 89.733 : blah."
  , "90.764 : 90.923 : The"
  , "90.924 : 91.263 : Ares"
  , "91.264 : 91.593 : 1"
  , "91.594 : 91.903 : crew"
  , "91.904 : 92.103 : did"
  , "92.104 : 92.253 : their"
  , "92.254 : 92.633 : thing"
  , "92.634 : 92.803 : and"
  , "92.804 : 93.033 : came"
  , "93.034 : 93.313 : back"
  , "93.314 : 93.763 : heroes."
  , "94.074 : 94.193 : They"
  , "94.194 : 94.423 : got"
  , "94.424 : 94.523 : the"
  , "94.524 : 95.213 : parades"
  , "95.214 : 95.313 : and"
  , "95.314 : 95.893 : fame"
  , "95.894 : 96.113 : and"
  , "96.114 : 96.323 : love"
  , "96.324 : 96.433 : of"
  , "96.434 : 96.523 : the"
  , "96.524 : 96.993 : world."
  , "97.504 : 97.743 : Ares"
  , "97.744 : 98.113 : 2"
  , "98.114 : 98.233 : did"
  , "98.234 : 98.303 : the"
  , "98.304 : 98.593 : same"
  , "98.594 : 98.863 : thing,"
  , "99.084 : 99.173 : in"
  , "99.174 : 99.253 : a"
  , "99.254 : 99.603 : different"
  , "99.604 : 100.163 : location"
  , "100.164 : 100.283 : on"
  , "100.284 : 100.643 : Mars."
  , "101.374 : 101.583 : They"
  , "101.584 : 101.823 : got"
  , "101.824 : 101.903 : a"
  , "101.904 : 102.273 : firm"
  , "102.274 : 102.903 : handshake"
  , "102.904 : 103.023 : and"
  , "103.024 : 103.063 : a"
  , "103.094 : 103.393 : hot"
  , "103.394 : 103.593 : cup"
  , "103.594 : 103.713 : of"
  , "103.714 : 104.163 : coffee"
  , "104.164 : 104.323 : when"
  , "104.324 : 104.473 : they"
  , "104.474 : 104.693 : got"
  , "104.694 : 105.713 : home."
  , "105.777 : 105.860 : Ares"
  , "105.861 : 105.965 : 3."
  , "106.884 : 107.183 : Well,"
  , "107.184 : 107.383 : that"
  , "107.384 : 107.663 : was"
  , "107.694 : 107.893 : my"
  , "107.894 : 108.223 : mission."
  , "108.724 : 108.973 : Okay,"
  , "108.974 : 109.183 : not"
  , "109.184 : 109.823 : mine"
  , "109.824 : 110.043 : per"
  , "110.044 : 110.323 : se."
  , "110.564 : 111.083 : Commander"
  , "111.084 : 111.603 : Lewis"
  , "111.604 : 111.793 : was"
  , "111.794 : 111.913 : in"
  , "111.914 : 112.513 : charge."
  , "112.544 : 112.693 : I"
  , "112.694 : 112.873 : was"
  , "112.874 : 113.143 : just"
  , "113.144 : 113.283 : one"
  , "113.284 : 113.353 : of"
  , "113.354 : 113.443 : her"
  , "113.444 : 113.803 : crew."
  , "114.384 : 114.843 : Actually,"
  , "114.844 : 114.933 : I"
  , "114.934 : 115.073 : was"
  , "115.074 : 115.163 : the"
  , "115.164 : 115.423 : very"
  , "115.424 : 115.903 : lowest"
  , "115.934 : 116.413 : ranked"
  , "116.414 : 116.843 : member"
  , "116.844 : 116.943 : of"
  , "116.944 : 117.033 : the"
  , "117.034 : 117.323 : crew."
  , "117.864 : 118.013 : I"
  , "118.014 : 118.133 : would"
  , "118.134 : 118.383 : only"
  , "118.384 : 118.553 : be"
  , "118.554 : 118.773 : in"
  , "118.774 : 119.233 : command”"
  , "119.234 : 119.323 : of"
  , "119.324 : 119.393 : the"
  , "119.394 : 119.793 : mission"
  , "119.794 : 119.963 : if"
  , "119.964 : 120.113 : I"
  , "120.114 : 120.243 : were"
  , "120.244 : 120.363 : the"
  , "120.364 : 120.643 : only"
  , "120.644 : 121.043 : remaining"
  , "121.044 : 121.403 : person."
  , "124.684 : 124.783 : I"
  , "124.784 : 125.053 : wonder"
  , "125.054 : 125.163 : if"
  , "125.164 : 125.353 : this"
  , "125.354 : 125.593 : log"
  , "125.594 : 125.753 : will"
  , "125.754 : 125.883 : be"
  , "125.884 : 126.343 : recovered"
  , "126.344 : 126.643 : before"
  , "126.644 : 126.753 : the"
  , "126.754 : 127.043 : rest"
  , "127.044 : 127.113 : of"
  , "127.114 : 127.183 : the"
  , "127.184 : 127.463 : crew"
  , "127.464 : 127.693 : die"
  , "127.694 : 127.853 : of"
  , "127.854 : 128.133 : old"
  , "128.133 : 128.573 : age."
  , "129.094 : 129.183 : I"
  , "129.184 : 129.583 : presume"
  , "129.584 : 129.693 : they"
  , "129.693 : 129.883 : got"
  , "129.883 : 130.133 : back"
  , "130.133 : 130.252 : to"
  , "130.252 : 130.353 : Earth"
  , "130.354 : 130.702 : all"
  , "130.704 : 131.023 : right."
  , "131.834 : 132.313 : Guys,"
  , "132.314 : 132.473 : if"
  , "132.474 : 132.603 : you’re"
  , "132.604 : 132.962 : reading"
  , "132.964 : 133.293 : this:"
  , "133.594 : 133.713 : It"
  , "133.714 : 134.043 : wasn’t"
  , "134.044 : 134.163 : your"
  , "134.164 : 134.633 : fault."
  , "134.974 : 135.113 : You"
  , "135.114 : 135.343 : did"
  , "135.344 : 135.493 : what"
  , "135.494 : 135.633 : you"
  , "135.634 : 135.873 : had"
  , "135.874 : 135.983 : to"
  , "135.984 : 136.293 : do."
  , "136.624 : 136.733 : In"
  , "136.734 : 136.913 : your"
  , "136.914 : 137.443 : position"
  , "137.444 : 137.533 : I"
  , "137.534 : 137.633 : would"
  , "137.634 : 137.783 : have"
  , "137.784 : 137.993 : done"
  , "137.994 : 138.093 : the"
  , "138.094 : 138.433 : same"
  , "138.434 : 138.643 : thing."
  , "139.314 : 139.433 : I"
  , "139.434 : 139.663 : don’t"
  , "139.664 : 139.973 : blame"
  , "139.974 : 140.103 : you,"
  , "140.104 : 140.623 : and"
  , "140.624 : 140.843 : I’m"
  , "140.844 : 141.193 : glad"
  , "141.194 : 141.273 : you"
  , "141.274 : 141.813 : survived."
  , "143.944 : 144.063 : I"
  , "144.064 : 144.303 : guess"
  , "144.304 : 144.363 : I"
  , "144.364 : 144.553 : should"
  , "144.554 : 145.033 : explain"
  , "145.034 : 145.183 : how"
  , "145.184 : 145.533 : Mars"
  , "145.534 : 145.933 : missions"
  , "145.934 : 146.303 : work,"
  , "146.304 : 146.483 : for"
  , "146.484 : 146.723 : any"
  , "146.724 : 147.123 : layman"
  , "147.184 : 147.433 : who"
  , "147.434 : 147.603 : may"
  , "147.604 : 147.743 : be"
  , "147.744 : 148.063 : reading"
  , "148.064 : 148.293 : this."
  , "149.044 : 149.203 : We"
  , "149.204 : 149.423 : got"
  , "149.424 : 149.543 : to"
  , "149.544 : 149.853 : Earth"
  , "149.854 : 150.203 : orbit"
  , "150.204 : 150.283 : the"
  , "150.284 : 150.653 : normal"
  , "150.654 : 150.913 : way,"
  , "151.114 : 151.303 : through"
  , "151.304 : 151.443 : an"
  , "151.444 : 151.933 : ordinary"
  , "151.934 : 152.233 : ship"
  , "152.234 : 152.363 : to"
  , "152.364 : 152.923 : Hermes."
  , "153.274 : 153.513 : All"
  , "153.514 : 153.673 : the"
  , "153.674 : 154.013 : Ares"
  , "154.014 : 154.463 : missions"
  , "154.464 : 154.683 : use"
  , "154.684 : 155.043 : Hermes"
  , "155.044 : 155.153 : to"
  , "155.154 : 155.363 : get"
  , "155.364 : 155.463 : to"
  , "155.464 : 155.783 : and"
  , "155.784 : 156.153 : from"
  , "156.154 : 156.505 : Mars."
  , "156.770 : 157.033 : It’s"
  , "157.034 : 157.403 : really"
  , "157.404 : 157.803 : big"
  , "157.804 : 158.043 : and"
  , "158.044 : 158.363 : cost"
  , "158.364 : 158.463 : a"
  , "158.464 : 158.733 : lot"
  , "158.734 : 158.993 : so"
  , "159.024 : 159.423 : NASA"
  , "159.424 : 159.723 : built"
  , "159.724 : 159.973 : only"
  , "159.974 : 160.493 : one."
  , "161.274 : 161.593 : Once"
  , "161.594 : 161.743 : we"
  , "161.744 : 161.953 : got"
  , "161.954 : 162.063 : to"
  , "162.064 : 162.593 : Hermes,"
  , "162.624 : 162.943 : four"
  , "162.944 : 163.463 : additional"
  , "163.494 : 164.113 : unmanned"
  , "164.114 : 164.623 : missions"
  , "164.624 : 164.943 : brought"
  , "164.944 : 165.123 : us"
  , "165.124 : 165.493 : fuel"
  , "165.494 : 165.653 : and"
  , "165.654 : 166.263 : supplies"
  , "166.264 : 166.443 : while"
  , "166.444 : 166.613 : we"
  , "166.614 : 167.053 : prepared"
  , "167.054 : 167.233 : for"
  , "167.234 : 167.333 : our"
  , "167.334 : 167.743 : trip."
  , "168.374 : 168.653 : Once"
  , "168.654 : 169.053 : everything"
  , "169.054 : 169.213 : was"
  , "169.214 : 169.263 : a"
  , "169.264 : 169.743 : go,"
  , "169.744 : 169.933 : we"
  , "169.934 : 170.193 : set"
  , "170.194 : 170.373 : out"
  , "170.374 : 170.513 : for"
  , "170.514 : 170.853 : Mars."
  , "171.454 : 171.603 : But"
  , "171.604 : 171.793 : not"
  , "171.794 : 172.043 : very"
  , "172.044 : 172.573 : fast."
  , "172.924 : 173.373 : Gone"
  , "173.374 : 173.433 : are"
  , "173.434 : 173.563 : the"
  , "173.564 : 173.963 : days"
  , "173.964 : 174.073 : of"
  , "174.074 : 174.393 : heavy"
  , "174.394 : 174.813 : chemical"
  , "174.814 : 175.153 : fuel"
  , "175.154 : 175.593 : burns"
  , "175.594 : 175.793 : and"
  , "175.794 : 176.183 : trans-"
  , "176.184 : 176.583 : trans-"
  , "176.584 : 177.173 : Mars"
  , "177.174 : 177.633 : orbits."
  , "178.384 : 178.803 : Hermes"
  , "178.804 : 178.933 : is"
  , "178.934 : 179.293 : powered"
  , "179.294 : 179.513 : by"
  , "179.564 : 179.973 : ion"
  , "179.974 : 180.713 : engines."
  , "180.724 : 180.793 : They"
  , "180.794 : 181.173 : throw"
  , "181.174 : 181.743 : argon"
  , "181.744 : 181.923 : out"
  , "181.924 : 182.013 : the"
  , "182.014 : 182.303 : back"
  , "182.304 : 182.413 : of"
  , "182.414 : 182.473 : the"
  , "182.474 : 182.793 : ship"
  , "182.794 : 183.033 : really"
  , "183.034 : 183.463 : fast"
  , "183.464 : 183.483 : to"
  , "183.484 : 183.643 : get"
  , "183.644 : 183.743 : a"
  , "183.744 : 184.163 : tiny"
  , "184.164 : 184.493 : amount"
  , "184.494 : 184.573 : of"
  , "184.574 : 185.233 : acceleration."
  , "185.824 : 185.923 : The"
  , "185.924 : 186.163 : thing"
  , "186.164 : 186.453 : is,"
  , "186.784 : 186.893 : it"
  , "186.894 : 187.153 : doesn’t"
  , "187.154 : 187.373 : take"
  , "187.374 : 187.573 : much"
  , "187.574 : 188.183 : reactant"
  , "188.184 : 188.853 : mass,"
  , "188.854 : 189.063 : so"
  , "189.064 : 189.203 : a"
  , "189.204 : 189.503 : little"
  , "189.504 : 190.103 : argon"
  , "190.424 : 190.653 : and"
  , "190.654 : 190.683 : a"
  , "190.684 : 191.133 : nuclear"
  , "191.134 : 191.583 : reactor"
  , "191.584 : 191.643 : to"
  , "191.644 : 191.963 : power"
  , "191.964 : 192.433 : things)"
  , "192.744 : 193.103 : lets"
  , "193.104 : 193.283 : us"
  , "193.284 : 193.753 : accelerate"
  , "193.754 : 194.393 : constantly"
  , "194.394 : 194.533 : the"
  , "194.534 : 194.723 : whole"
  , "194.724 : 194.923 : way"
  , "194.924 : 195.183 : there."
  , "195.974 : 196.093 : You’d"
  , "196.094 : 196.223 : be"
  , "196.224 : 196.853 : amazed"
  , "196.854 : 196.913 : at"
  , "196.914 : 197.053 : how"
  , "197.054 : 197.433 : fast"
  , "197.434 : 197.503 : you"
  , "197.504 : 197.673 : can"
  , "197.674 : 197.863 : get"
  , "197.864 : 198.193 : going"
  , "198.194 : 198.343 : with"
  , "198.344 : 198.443 : a"
  , "198.504 : 198.933 : tiny"
  , "198.934 : 199.743 : acceleration"
  , "199.744 : 199.963 : over"
  , "199.964 : 200.043 : a"
  , "200.044 : 200.333 : long"
  , "200.334 : 200.563 : time." ];

  parseSyncFile();

  audio.playbackRate = 1.0;
  audio.muted = false;
  audio.addEventListener('canplaythrough', function(){
    source = audioCtx.createMediaElementSource(audio);
    source.connect(processor);
    source.connect(audioCtx.destination);
    processor.connect(audioCtx.destination);
    audio.play();
  }, false);

  parseSyncFile();

  // loop through PCM data and calculate average
  // volume for a given 2048 sample buffer
  // processor.onaudioprocess = function(evt){
  //   var input = evt.inputBuffer.getChannelData(0)
  //     , len = input.length
  //     , total = i = 0
  //     , rms;
  //   while ( i < len ) total += Math.abs( input[i++] );
  //   rms = Math.sqrt( total / len );
  //   console.log(( rms * 100 ));
  // };

  function parseSyncFile() {
    for (var i = 0; i < cheeseString.length; i++) {
      alert(cheeseString[i]);
    }
  }

  function speedAudio(int rate) {
    while (!audio.paused) {
      int time = audio.currentTime;

      if (time < )
      audio.playbackRate = rate;
    }
  }
  </script>
</body>
</html>
